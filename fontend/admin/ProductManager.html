<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<style>
    a {
        text-decoration: none;
        color: white;
    }

    a:hover {
        text-decoration: none;
        color: white;
    }
</style>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="/fontend/index.html">Start Bootstrap</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link active" aria-current="page"
                            href="/fontend/index.html">Home</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                            aria-expanded="false">Shop Manager</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="/fontend/admin/ProductManager.html">Product Manager</a>
                            <a class="dropdown-item" href="/fontend/admin/addproduct.html">Addproduct</a>
                            <a class="dropdown-item" href="/fontend/admin/UserMaganer.html">User Manager</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <h1 class="text-center">Trang Hiển thị danh sách sản phẩm</h1>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Imgae</th>
                <th scope="col">Brand</th>
                <th scope="col">Price</th>
                <th scope="col">description</th>
                <th scope="col">function</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <!-- <img src="/fontend/asset/img/giaytrang.png" alt=""> -->
    <script>
        const getProcuct = async () => {
            const tbody = document.querySelector('tbody')
            try {
                const list = await fetch('http://localhost:3000/Productnew')
                if (list.ok) {
                    const listpr = await list.json()
                    console.log(listpr)
                    listpr.forEach((list, index) => {
                        const tr = document.createElement('tr')
                        tr.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${list.name}</td>
                            <td><img src="${list.imgae}" width="90"></td>
                            <td>${list.brand}</td>
                            <td>${list.price}</td>
                            <td>${list.description}</td>
                            <td><button class="btn btn-danger" onclick="DellProduct('${list.id}')">Xóa</button>
                            <button class="btn btn-success"><a href="EditProduct.html?id=${list.id}">Sửa</a></button></td>
                        `;
                        tbody.append(tr)
                    })
                }
            } catch (error) {
                alert(error)
            }
        }
        getProcuct()
        const DellProduct = async (id) => {
            if (confirm('bạn chắc chứ')) {
                try {
                    const response = await fetch(`http://localhost:3000/Productnew/${id}`, { method: 'delete' })
                    if (response.ok) alert('xoa thanh cong')
                    else alert('xoa that bai')
                } catch (error) {

                }
            }
        }
    </script>
    <script src="../js/mian.js"></script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>